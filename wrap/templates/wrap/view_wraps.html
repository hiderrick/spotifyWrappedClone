{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Spotify Wraps</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <script src="{% static 'js/translation.js' %}"></script>
        <style>
        /* CSS to position the share buttons in the top-right corner */
        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .top-left, .top-left-below {
            position: fixed;
            left: 20px;
            z-index: 1000;
        }

        .top-left {
            top: 20px;
        }

        .top-left-below {
            top: 70px; /* Positioned below the "Back to Home" button */
        }

        .wrap-item {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .wrap-item button {
            margin-left: 10px;
        }
    </style>
</head>
<body>

    <script>
        // Function to handle Twitter share
        function shareToTwitter(wrapName, url) {
            const text = encodeURIComponent(`Check out my Spotify Wrap: ${wrapName}!`);
            const encodedUrl = encodeURIComponent(window.location.origin + url);
            const twitterUrl = `https://twitter.com/intent/tweet?text=${text}&url=${encodedUrl}`;
            window.open(twitterUrl, '_blank');
        }

        // Function to handle LinkedIn share
        function shareToLinkedIn(url) {
            const encodedUrl = encodeURIComponent(window.location.origin + url);
            const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`;
            window.open(linkedInUrl, '_blank');
        }
    </script>

    <!-- Left-side Navigation Buttons -->
    <div class="top-left">
        <a href="{% url 'home' %}" class="btn btn-primary">Back to Home</a>
        <a href="{% url 'profile' %}" class="btn btn-primary">Go to Profile</a>
    </div>

    <div class="container" id="content">
        <h1>Your Spotify Wraps</h1>
        {% if no_wraps %}
            <p>No Wrap data available. Please listen to some music to generate your Spotify Wrap!</p>
        {% else %}
            <ul>
                {% for wrap in wraps %}
                    <li class="wrap-item">
                        <span>
                            <a href="{% url 'your_wrap' wrap.wrap_id %}">{{ wrap.name }}</a> :
                            <a href="{% url 'wrap_detail' wrap.wrap_id %}">Details</a>
                            | <a href="{% url 'delete_wrap' wrap.wrap_id %}">Delete</a>
                            | <a href="{% url 'analyze_wrap' wrap.wrap_id %}">Analyze</a>
                        </span>
                        <div class="share-buttons">
                            <button onclick="shareToTwitter('{{ wrap.name }}', '{% url 'your_wrap' wrap.wrap_id %}')">
                                Share on Twitter
                            </button>
                            <button onclick="shareToLinkedIn('{% url 'your_wrap' wrap.wrap_id %}')">
                                Share on LinkedIn
                            </button>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
        <a href="{% url 'create_wrap' %}">
            <button class="createBTN"> Create </button>
        </a>
    </div>

</body>
</html>
